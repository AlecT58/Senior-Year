function search(t,e,r,a,i){const s="?media="+sanitizeString(t),c="&term="+sanitizeString(e),o="&entity="+sanitizeString(r),d="&attribute="+sanitizeString(a),n="&limit=200",l="https://itunes.apple.com/search"+s+n+o+d+c;$.ajax({type:"GET",url:l,dataType:"html",cache:!0,success:function(t){resetTable(i)},complete:function(e){JSON.parse(e.responseText).results.forEach(e=>{displayResults(t,e)}),setupDataTables([i]),toggleLoader()}})}function sanitizeString(t){return t.replace(/[&?=]/g,"").replace(" ","+").trim()}function displayResults(t,e){"music"===t&&e.trackPrice>=0?$("#tblMusic tbody").append("<tr style='rgba(212, 212, 255, 0.035);'><td>"+e.trackName+"</td><td>"+e.artistName+"</td><td> "+e.collectionName+"</td><td>"+e.primaryGenreName+"</td><td>$"+e.trackPrice+"</td><td><audio controls><source src='"+e.previewUrl+"'></audio></td><td><i class='fa fa-shopping-cart'></i></td></tr>"):"tvShow"===t&&e.trackPrice>=0?$("#tblTV tbody").append("<tr style='rgba(212, 212, 255, 0.035);'><td>"+e.trackName+"</td><td>"+e.collectionName+"</td><td>"+e.primaryGenreName+"</td><td>$"+e.trackPrice+"</td><td><video width='100' height='100' controls><source src='"+e.previewUrl+"'></video></td><td><i class='fa fa-shopping-cart'></i></td></tr>"):"movie"===t&&e.trackPrice>=0&&$("#tblMovie tbody").append("<tr style='rgba(212, 212, 255, 0.035);'><td>"+e.trackName+"</td><td>"+e.artistName+"</td><td>"+e.primaryGenreName+"</td><td>$"+e.trackPrice+"</td><td><video width='100' height='100' controls><source src='"+e.previewUrl+"'></video></td><td><i class='fa fa-shopping-cart'></i></td></tr>")}function saveItemToDatabase(t,e){let r={};if("music"===e)r={music:JSON.stringify(t)};else if("tv"===e)r={tv:JSON.stringify(t)};else{if("movie"!==e)return!1;r={movie:JSON.stringify(t)}}$.ajax({type:"POST",url:"http://www.alectrievel.com/schoolwork/CS0334/final/php/saveItem.php",data:r,success:function(t){console.log(t),"ok"===t?swal({type:"success",title:"Great!",text:"The selected item was saved to your cart",footer:"<a href='cart.html'>View your cart here</a>"}):swal({type:"error",title:"Oh no!",text:"Something went wrong. Please try again."})}})}